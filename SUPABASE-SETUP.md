# ๐ ุฏููู ุฅุนุฏุงุฏ Supabase - ูุทุนู ูุงุณุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฑุจุท ุงููููุน ุจู Supabase ููุงุนุฏุฉ ุจูุงูุงุช ุณุญุงุจูุฉ ุญููููุฉ. ุงููููุน ูุฏุนู:
- โ **Supabase Mode**: ูุงุนุฏุฉ ุจูุงูุงุช ุณุญุงุจูุฉ
- โ **localStorage Mode**: Fallback ุชููุงุฆู ุฅุฐุง ูู ูุชู ุฅุนุฏุงุฏ Supabase

---

## ๐ง ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅูุดุงุก ูุดุฑูุน Supabase

#### ุฃ) ุงูุชุญ Supabase:
```
https://supabase.com
```

#### ุจ) ุฃูุดุฆ ุญุณุงุจ ุฃู ุณุฌูู ุฏุฎูู

#### ุฌ) ุงุถุบุท "New Project"

#### ุฏ) ุงููุฃ ุงูุจูุงูุงุช:
- **Name**: Masa Restaurant
- **Database Password**: ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ (ุงุญูุธูุง!)
- **Region**: ุงุฎุชุฑ ุฃูุฑุจ ููุทูุฉ (ูุซูุงู: eu-central-1)
- **Pricing Plan**: Free (ูุฌุงูู - ูุงูู ูููุดุฑูุน)

#### ูู) ุงุถุบุท "Create New Project"
ุณูุณุชุบุฑู ุฏูููุชูู ูุฅูุดุงุก ุงููุดุฑูุน...

---

### 2. ุงูุญุตูู ุนูู API Keys

ุจุนุฏ ุฅูุดุงุก ุงููุดุฑูุน:

#### ุฃ) ุงุฐูุจ ุฅูู "Settings" โ "API"

#### ุจ) ุณุชุฌุฏ:
- **Project URL**: ูุซู `https://xxxxx.supabase.co`
- **Project API keys**:
  - `anon` `public` key: ุงุณุชุฎุฏู ูุฐุง ุงูููุชุงุญ

#### ุฌ) ุงูุณุฎ ุงูููู ูุงุญูุธูุง!

---

### 3. ุชูุนูู Supabase ูู ุงููุดุฑูุน

#### ุฃ) ุงูุชุญ ููู `.env`:
```bash
nano .env
# ุฃู
code .env
```

#### ุจ) ุงูุตู ุงูููู ุงูุชู ูุณุฎุชูุง:
```env
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

โ๏ธ **ููู**: ูุง ุชุดุงุฑู ูุฐู ุงูููุงุชูุญ ุนููุงู!

---

### 4. ุฅูุดุงุก ุงูุฌุฏุงูู (Tables)

#### ุฃ) ูู ููุญุฉ ุชุญูู Supabaseุ ุงุฐูุจ ุฅูู:
```
SQL Editor โ New Query
```

#### ุจ) ุงูุณุฎ ูุงูุตู ูุญุชูู ููู `supabase-schema.sql` ูุงููุงู

#### ุฌ) ุงุถุบุท "Run" ุฃู Ctrl+Enter

#### ุฏ) ูุฌุจ ุฃู ุชุฑู:
```
Success. No rows returned
```

โ **ุชู! ุงูุฌุฏุงูู ุฃููุดุฆุช:**
- `categories` - ุงูุชุตูููุงุช
- `products` - ุงูููุชุฌุงุช

---

### 5. ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ

ูุฏูู ุฎูุงุฑุงู:

#### ุงูุฎูุงุฑ 1: ุงุณุชูุฑุงุฏ ูุฏูู (ูููุตู ุจู)

ุงุณุชุฎุฏู **ููุญุฉ ุงูุชุญูู Admin Panel** ูุฅุถุงูุฉ ุงูููุชุฌุงุช:
1. ุดุบูู ุงููุดุฑูุน: `npm run dev`
2. ุงุฐูุจ ุฅูู: `http://localhost:5173/admin/login`
3. ูููุฉ ุงููุฑูุฑ: `masa2025`
4. ุฃุถู ุงูููุชุฌุงุช ูุงุญุฏุงู ุชูู ุงูุขุฎุฑ

**ุงููุงุฆุฏุฉ**: ุงูุจูุงูุงุช ุชูุญูุธ ูุจุงุดุฑุฉ ูู Supabase!

#### ุงูุฎูุงุฑ 2: ุงุณุชูุฑุงุฏ ุชููุงุฆู (Advanced)

ุฅุฐุง ูุงู ูุฏูู ุจูุงูุงุช ูู `localStorage` ูุชุฑูุฏ ููููุง:

1. ุงูุชุญ **Developer Tools** (F12)
2. Console โ ุงูุชุจ:
```javascript
// Get data from localStorage
const data = localStorage.getItem('menuCategories')
console.log(JSON.parse(data))
```

3. ุงูุณุฎ ุงูุจูุงูุงุช
4. ูู Supabase SQL Editorุ ุงุณุชุฎุฏู INSERT statements:
```sql
INSERT INTO products (category_id, name, price, image) VALUES
  ('trays', 'ูุจุณุฉ ุจุงูุฏูู ุงูุฑููู', 1100, 'https://...');
```

---

### 6. ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

#### ุฃ) ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ:
```bash
# ุฃููู ุงูุณูุฑูุฑ (Ctrl+C)
npm run dev
```

#### ุจ) ุงูุชุญ Console (F12):
ูุฌุจ ุฃู ุชุฑู:
```
โ Data loaded from Supabase
```

ุฅุฐุง ุฑุฃูุช ูุฐุง โ **ูุฌุญ ุงูุฅุนุฏุงุฏ!** ๐

ุฅุฐุง ุฑุฃูุช:
```
๐ฆ Data loaded from localStorage
```
โ ุฑุงุฌุน ุฎุทูุงุช ุงูุฅุนุฏุงุฏ (ุฎุงุตุฉ ููู `.env`)

---

## ๐ Row Level Security (RLS)

ุชู ุฅุนุฏุงุฏ RLS ุชููุงุฆูุงู:

### ุงูููุงุนุฏ:
- โ **ูุฑุงุกุฉ (Read)**: ุงูุฌููุน ูููููู ุงููุฑุงุกุฉ (ุฒูุงุฑ ุงููููุน)
- ๐ **ูุชุงุจุฉ (Write/Update/Delete)**: ููุท ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู

### ุชูุนูู Authentication (ุงุฎุชูุงุฑู):

ุฅุฐุง ุฃุฑุฏุช ุญูุงูุฉ ุฃููู:

1. ุงุฐูุจ ุฅูู "Authentication" ูู Supabase
2. Enable Email provider
3. ุฃูุดุฆ ูุณุชุฎุฏู admin
4. ุนุฏูู ููุฏ login ูู `AdminContext.jsx` ูุงุณุชุฎุฏุงู Supabase Auth

---

## ๐ ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช

### ุนุฑุถ ุงูุจูุงูุงุช:

ูู Supabase Dashboard:
```
Table Editor โ categories (ุฃู products)
```

ููููู:
- โ ุนุฑุถ ุฌููุน ุงูุณุฌูุงุช
- โ ุชุนุฏูู ูุจุงุดุฑุฉ
- โ ุญุฐู
- โ ุฅุถุงูุฉ

### ุนูู Backup:

```sql
-- ูู SQL Editor
SELECT * FROM categories;
SELECT * FROM products;
```

ุงูุณุฎ ุงููุชุงุฆุฌ ูุงุญูุธูุง!

---

## ๐ Sync ูุน localStorage

ุงููุธุงู ูุนูู ุจุฐูุงุก:

### ุฅุฐุง ูุงู Supabase ูููุนูู:
```javascript
addProduct() โ ูุญูุธ ูู Supabase โ
```

### ุฅุฐุง ูู ููู ูููุนูู:
```javascript
addProduct() โ ูุญูุธ ูู localStorage โ
```

---

## ๐ ุญู ุงููุดุงูู

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุจูุงูุงุช

**ุงูุญู:**
1. ุชุฃูุฏ ูู `.env` ูุญุชูู ุนูู ุงูููู ุงูุตุญูุญุฉ
2. ุชุฃูุฏ ูู ุชุดุบูู `supabase-schema.sql`
3. ุงูุญุต Console ูู ุงููุชุตูุญ ููุฃุฎุทุงุก

### ุงููุดููุฉ: "PGRST301"

**ุงูุณุจุจ**: ุฌุฏูู ุบูุฑ ููุฌูุฏ

**ุงูุญู**: ุดุบูู `supabase-schema.sql` ูู ุฌุฏูุฏ

### ุงููุดููุฉ: "JWT expired"

**ุงูุณุจุจ**: ุงููุดุฑูุน ุฃูุบูู ุฃู ุญูุฐู

**ุงูุญู**: ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ูุญุฏูุซ `.env`

### ุงููุดููุฉ: ุงูุจูุงูุงุช ุงููุฏููุฉ ุธุงูุฑุฉ

**ุงูุญู:**
```javascript
// ูู Console
localStorage.clear()
location.reload()
```

---

## ๐พ ููุงุฑูุฉ localStorage vs Supabase

| Feature | localStorage | Supabase |
|---------|-------------|----------|
| **ุงูุชุฎุฒูู** | ูุญูู (ูู ุงููุชุตูุญ) | ุณุญุงุจู (PostgreSQL) |
| **ุงูุณุนุฉ** | ~5-10 MB | GB (ูุฌุงูู: 500 MB) |
| **ุงููุดุงุฑูุฉ** | โ ูุง | โ ูุนู |
| **Real-time** | โ ูุง | โ ูุนู |
| **Backup** | ูุฏูู | ุชููุงุฆู |
| **ุงูุณุนุฑ** | ูุฌุงูู | ูุฌุงูู (500MB) |
| **ุงูุฃูุงู** | ุนุงุฏู | RLS + Auth |

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. **Enable Realtime** (ุงุฎุชูุงุฑู):

ูุชุญุฏูุซ ุชููุงุฆู ููุจูุงูุงุช:

```javascript
// ูู AdminContext.jsx
supabase
  .channel('products-changes')
  .on('postgres_changes', 
    { event: '*', schema: 'public', table: 'products' },
    () => loadCategories()
  )
  .subscribe()
```

### 2. **ุตูุฑ ุงูููุชุฌุงุช**:

ุงุฑูุน ุงูุตูุฑ ุนูู Supabase Storage:
1. Storage โ Create bucket โ "products"
2. Upload images
3. ุงุณุชุฎุฏู URLs ุจุฏูุงู ูู Catbox

### 3. **Analytics**:

ุฅุถุงูุฉ tracking:
- ุนุฏุฏ ุงูุฒูุงุฑุงุช ููู ููุชุฌ
- ุงูููุชุฌุงุช ุงูุฃูุซุฑ ูุดุงูุฏุฉ

---

## โ ุงูุฎูุงุตุฉ

ุชู ุฑุจุท ุงููููุน ุจู Supabase ุจูุฌุงุญ! ุงูุขู:

โ **ูุงุนุฏุฉ ุจูุงูุงุช ุณุญุงุจูุฉ** ุจุฏูุงู ูู localStorage
โ **Backup ุชููุงุฆู**
โ **ุฅููุงููุฉ ุงููุดุงุฑูุฉ** ุจูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ
โ **Scalable** ูุขูุงู ุงูููุชุฌุงุช
โ **Fallback ุฐูู** ุนูู localStorage

**ููุจุฏุก**: ุงููุฃ ููู `.env` ูุดุบูู `supabase-schema.sql`

**ุฌุงูุฒ ููุงูุทูุงู! ๐**
